{"version":3,"file":"utils-VTbPu1Wo.js","sources":["../../utils.js"],"sourcesContent":["/**\r\n * 安全地将字符串转义为 HTML 实体，防止 XSS\r\n * @param {string} str - 待转义的字符串\r\n * @returns {string} 转义后的字符串\r\n */\r\nexport function escapeHtml(str) {\r\n  if (typeof str !== 'string') return '';\r\n  return str\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#039;');\r\n}\r\n\r\n/**\r\n * 从任意字符串生成合法的 URL 查询参数对象\r\n * @param {string} text - 可能是 \"?a=1&b=2\" 或 \"a=1&b=2\"\r\n * @returns {Object|null} 解析后的对象，失败返回 null\r\n */\r\nexport function parseQrText(text) {\r\n  try {\r\n    const search = text.startsWith('?') ? text : '?' + text;\r\n    const params = new URLSearchParams(new URL(search, 'https://fake').search);\r\n    return Object.fromEntries(params.entries());\r\n  } catch (e) {\r\n    console.error('解析二维码内容失败:', e);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * 深度合并两个对象（仅处理简单层级）\r\n * @param {Object} target \r\n * @param {Object} source \r\n * @returns {Object}\r\n */\r\nexport function mergeDraft(target, source) {\r\n  return { ...target, ...source };\r\n}\r\n\r\n/**\r\n * 判断是否运行在 PWA 环境中\r\n */\r\nexport function isPWA() {\r\n  return window.matchMedia('(display-mode: standalone)').matches ||\r\n         window.navigator.standalone === true;\r\n}"],"names":["escapeHtml","str","parseQrText","text","search","params","e"],"mappings":"AAKO,SAASA,EAAWC,EAAK,CAC9B,OAAI,OAAOA,GAAQ,SAAiB,GAC7BA,EACJ,QAAQ,KAAM,OAAO,EACrB,QAAQ,KAAM,MAAM,EACpB,QAAQ,KAAM,MAAM,EACpB,QAAQ,KAAM,QAAQ,EACtB,QAAQ,KAAM,QAAQ,CAC3B,CAOO,SAASC,EAAYC,EAAM,CAChC,GAAI,CACF,MAAMC,EAASD,EAAK,WAAW,GAAG,EAAIA,EAAO,IAAMA,EAC7CE,EAAS,IAAI,gBAAgB,IAAI,IAAID,EAAQ,cAAc,EAAE,MAAM,EACzE,OAAO,OAAO,YAAYC,EAAO,QAAO,CAAE,CAC5C,OAASC,EAAG,CACV,eAAQ,MAAM,aAAcA,CAAC,EACtB,IACT,CACF"}